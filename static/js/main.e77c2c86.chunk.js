(this["webpackJsonparticle-react-rxjs-observable-hooks-class-rxjs"]=this["webpackJsonparticle-react-rxjs-observable-hooks-class-rxjs"]||[]).push([[0],{30:function(t,e,n){},44:function(t,e,n){"use strict";n.r(e);var r=n(3),c=n.n(r),i=n(31),o=n.n(i),a=n(18),u=n(19),s=n(26),l=n(25),j=n(29),h=n(17),p=n(27),b=n(50),f=n(33),x=n(47),d=n(48),O=n(34),v=n(52),m=n(49),g=n(51),k=n(10),y=n(0),C=k.a.div({backgroundColor:"lightgray",height:"60px",fontSize:"40px",display:"flex",padding:"5px",justifyContent:"center",outline:"none",border:"none",boxShadow:"none"});function $(t){var e=t.content;return Object(y.jsx)(C,{children:e})}var w=k.a.div({display:"flex",flexDirection:"column-reverse",gap:"5px"}),M=k.a.div({display:"flex",gap:"5px"}),S=k.a.button({width:"120px",height:"100px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"30px"});function A(t){var e=t.whenAction;return Object(y.jsxs)(w,{children:[Object(y.jsx)(M,{children:Object(y.jsx)(S,{onClick:function(){return e(0)},children:"0"})}),Object(y.jsxs)(M,{children:[Object(y.jsx)(S,{onClick:function(){return e(1)},children:"1"}),Object(y.jsx)(S,{onClick:function(){return e(2)},children:"2"}),Object(y.jsx)(S,{onClick:function(){return e(3)},children:"3"})]}),Object(y.jsxs)(M,{children:[Object(y.jsx)(S,{onClick:function(){return e(4)},children:"4"}),Object(y.jsx)(S,{onClick:function(){return e(5)},children:"5"}),Object(y.jsx)(S,{onClick:function(){return e(6)},children:"6"})]}),Object(y.jsxs)(M,{children:[Object(y.jsx)(S,{onClick:function(){return e(7)},children:"7"}),Object(y.jsx)(S,{onClick:function(){return e(8)},children:"8"}),Object(y.jsx)(S,{onClick:function(){return e(9)},children:"9"})]})]})}var E=k.a.div({display:"flex",gap:"5px"}),N=k.a.button({width:"120px",height:"100px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"30px"});function P(t){var e=t.onAction;return Object(y.jsxs)(E,{children:[Object(y.jsx)(N,{onClick:function(){return e("+")},children:"+"}),Object(y.jsx)(N,{onClick:function(){return e("-")},children:"-"})]})}n(30);var U=Object(k.a)((function(t){var e=t.className,n=t.result,r=t.numPad,c=t.operationsPad;return Object(y.jsxs)("div",{className:e,children:[Object(y.jsx)("div",{className:"result",children:n}),Object(y.jsxs)("div",{className:"keysPads",children:[r," ",c]})]})}))({display:"flex",flexFlow:"column",gap:"15px",alignItems:"stretch",".result":{},".keysPads":{display:"flex",gap:"15px"}}),z=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).onNumber=function(t){return r.numAction$.next(t)},r.onMathOperation=function(t){return r.mathOperation$.next(t)},r.state={result:"",expr:[]},r}return Object(u.a)(n,[{key:"render",value:function(){return Object(y.jsx)(U,{result:Object(y.jsx)($,{content:this.state.result}),numPad:Object(y.jsx)(A,{whenAction:this.onNumber}),operationsPad:Object(y.jsx)(P,{onAction:this.onMathOperation})})}},{key:"componentDidMount",value:function(){var t,e=this;this.onUnmount$=new p.a,this.propsChanges$=new p.a,this.numAction$=new p.a,this.mathOperation$=new p.a,this.inputMode$=(t="mode",this.propsChanges$.pipe(Object(m.a)((function(e){var n=e.prev,r=e.current;return n[t]!==r[t]})),Object(O.a)((function(e){return e.current[t]})),Object(g.a)({bufferSize:1,refCount:!0}))),this.mathExpression$=this.streamMathExpression(),this.result$=this.streamResult(),Object(b.a)(this.inputMode$,this.result$.pipe(Object(x.a)((function(t){return e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{result:t})}))}))),this.mathExpression$.pipe(Object(x.a)((function(t){return e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{expr:t})}))})))).pipe(Object(d.a)(this.onUnmount$)).subscribe()}},{key:"componentWillUnmount",value:function(){this.onUnmount$.next(),this.onUnmount$.complete()}},{key:"componentDidUpdate",value:function(t){this.propsChanges$.next({prev:t,current:this.props})}},{key:"streamMathExpression",value:function(){var t=this;return Object(f.a)((function(){return Object(b.a)(t.numAction$.pipe(Object(O.a)((function(t){return{action:"number",value:t}}))),t.mathOperation$.pipe(Object(O.a)((function(t){return{action:"operation",value:t}}))))}),Object(v.a)((function(t,e){var n=e.action,r=e.value;return"number"===n&&t.length>0&&"number"===t[t.length-1].action?t:"operation"!==n||0!==t.length&&"operation"!==t[t.length-1].action?[].concat(Object(j.a)(t),[{action:n,value:r}]):t}),[]))(null)}},{key:"streamResult",value:function(){var t=this;return Object(f.a)((function(){return t.mathExpression$}),Object(m.a)((function(t){return t.length>=3&&t.length%2===1})),Object(O.a)((function(t){return t.reduce((function(t,e){var n=t.values,r=t.operator,c=e.action,i=e.value;if("operation"===c)return{values:n,operator:i};if(null===r)return{values:[].concat(Object(j.a)(n),[i]),operator:r};var o=function(t){if("+"===t)return function(t,e){return t+e};if("-"===t)return function(t,e){return t-e};throw new Error("unimplemented")}(r)(n[0],i);return{values:[o],operator:null}}),{values:[],operator:null})})),Object(O.a)((function(t){return t.values[0]})),Object(O.a)((function(t){return JSON.stringify(t)})))(null)}}]),n}(c.a.Component);var I=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).state={calcMode:"scientific"},r}return Object(u.a)(n,[{key:"render",value:function(){return Object(y.jsx)(z,{mode:this.state.calcMode})}}]),n}(c.a.Component),D=document.getElementById("root");o.a.render(Object(y.jsx)(r.StrictMode,{children:Object(y.jsx)(I,{})}),D)}},[[44,1,2]]]);
//# sourceMappingURL=main.e77c2c86.chunk.js.map